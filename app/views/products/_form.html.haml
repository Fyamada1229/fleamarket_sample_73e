= form_for @product do |f|

  出品画像
  %br
  #image-box
    #previews
      - if @product.persisted?
        - @product.images.each do |image, i|
          = image_tag image.src.url, data: { index: i }, width: "100", height: "100"

    = f.fields_for :images do |image|
      .js-file_group{ data: { index: image.index } } 
        = image.file_field :src, class: 'js-file'
        %br
        %span.js-remove
          削除

      - if @product.persisted?
        = image.check_box :_destroy, data: { index: image.index }, class: 'hidden-destroy'

    - if @product.persisted?
      .js-file_group{ data: { index: @product.images.count } }
        = file_field_tag :src, name: "product[images_attributes][#{@product.images.count}][src]", class: 'js-file'
        .js-remove
          削除
          %br

  商品名
  %br
  = f.text_field :name
  %br

  商品の説明
  %br
  = f.text_area :explain
  %br

  商品の状態
  %br
  = f.collection_select :condition_id, Condition.all, :id, :name
  %br

  配送料の負担
  %br
  = f.collection_select :costburden_id, Costburden.all, :id, :name
  %br

  発送元の地域
  %br
  = f.collection_select :shippingorigin_id, Shippingorigin.all, :id, :name
  %br

  発送までの日数
  %br
  = f.collection_select :shippingperiod_id, Shippingperiod.all, :id, :name
  %br

  販売価格
  %br
  = f.number_field :price
  %br

  = f.submit
  %br

  = link_to root_path do
    戻る
